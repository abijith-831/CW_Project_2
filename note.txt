<div className="flex flex-wrap items-center gap-2 p-2 min-h-[40px] text-sm border border-slate-300 bg-white rounded-md cursor-text shadow-sm focus-within:ring-2" onClick={() => { setIsOpen(true); inputRef.current?.focus(); }}>
  {/* Show only first 3 selected tags */}
  {selectedTags.slice(0, 3).map(tag => (
    <div key={tag.topic} className="flex items-center gap-1.5 bg-[#97bdbd] cursor-pointer font-medium px-2 py-1 rounded-full text-xs">
      <TagIcon />
      {tag.topic}
      <button type="button" disabled={selectedTags.length <= 1} className={`cursor-pointer hover:bg-green-700 rounded-full ${selectedTags.length <= 1 ? "opacity-40 cursor-not-allowed" : ""}`}
        onClick={e => { e.stopPropagation();
          if (selectedTags.length > 1) removeTag(tag); }}>
        <XIcon />
      </button>
    </div>
  ))}

  {/* If more than 3 â†’ show text */}
  {selectedTags.length > 3 && (
    <span className="text-xs ml-1 text-slate-600"> +{selectedTags.length - 3} more</span>
  )}

  {/* Only show input when less than 3 tags OR when focused */}
  {selectedTags.length <= 3 && (
    <input
      ref={inputRef}
      type="text"
      value={searchTerm}
      onChange={e => setSearchTerm(e.target.value)}
      onFocus={() => setIsOpen(true)}
      placeholder={selectedTags.length === 0 ? "Select columns..." : ""}
      className="flex-1 bg-transparent outline-none text-sm min-w-[60px]"
    />
  )}
</div>